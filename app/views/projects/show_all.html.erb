
<table style="width:100%" id="projects-list-table-details">
    <thead>
    <tr>
        <th>Member name</th>
        <th>Total hours</th>
        <% @users[0][:projects].each do |project| %>
            <th><%= project[:object].project_name %></th>
        <% end %>
    </tr>
    </thead>
<tbody>
    <% @users.each do |user| %>
        <tr>
            <td><%= user[:user] %></td>
            <td><%= user[:total_sum]%></td>
            <% user[:projects].each do |project| %>
                <td>
                    <%= project[:hours].to_s +  ':'+ project[:minutes].to_s   %>
                </td>
            <% end %>
        </tr>

    <% end %>
</tbody>
</table>


<script type="text/javascript">
    $(document).ready(function () {

        // $('#projects-list-table tfoot th').each( function () {
        //     var title = $(this).text();
        //     $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
        // } );

        var dataTable = $('#projects-list-table-details').DataTable({
            lengthChange: false,
            pageLength: 100,
            dom: '<"dt-top-left"Tf>lrtip',
            // buttons: ['print']
        });
        // console.log(dataTable.columns()[0]);
        // dataTable.columns().every( function () {
        //     var that = this;
        //     console.log(this);
        //
        //     $( 'input', this.footer() ).on( 'keyup change clear', function () {
        //         if ( that.search() !== this.value ) {
        //             that
        //                 .search( this.value )
        //                 .draw();
        //         }
        //     } );
        // } );
        $(document).on("turbolinks:before-cache", function () {
            if (dataTable !== null) {
                dataTable.destroy();
                dataTable = null;
            }
        });
    });
</script>
<style>
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }
</style>

