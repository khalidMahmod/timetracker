- if current_user.is_admin?
  = render partial: 'admin_filter'
.panel.panel-default
  .panel-heading
    %b Employees
  %table.table.table-bordered.table-hover#employee-info-table
    %thead
      %tr
        %th{:width => '25%'} Name
        %th{:width => '30%'} Email
        %th{:width => '15%'} Contact Number
        %th{:width => '5%'} Blood Group
        - if current_user.is_admin?
          %th{:width => '10%'} Joining Date
        %th{:width => '15%'} TTF
    %tbody.word-break
      - @employees.each do |employee|
        %tr
          %td
            = link_to employee.name, employee_path(employee)
          %td= employee.email
          %td= employee.mobile_number.present? ? (employee.mobile_number) : 'N/A'
          %td= employee.blood_group
          - if current_user.is_admin?
            %td= employee.joining_date
          -if employee.ttf_id?
            %td= User.find(employee.ttf_id).name
          -else
            %td= "N/A"
:javascript
  $(document).ready(function() {
      var dataTable = $('#employee-info-table').DataTable({
        lengthChange: false,
        pageLength: 100,
        dom: 'T<"clear">lfrtip',
        buttons: ['print']
      });
      $(document).on("turbolinks:before-cache", function() {
        if (dataTable !== null) {
          dataTable.destroy();
          dataTable = null;
        }
      });
  });